<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no" />
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>Music House 手机端主框架页</title>

    <link type="text/css" rel="stylesheet" href="css/reset.css">
    <link type="text/css" rel="stylesheet" href="css/common.css">

    <link type="text/css" rel="stylesheet" href="plugins/myfonticon/iconfont.css">


</head>
<body class="s1c-Bg" style="width:100%; height:100%; position:relative; border:none;">


    <!-- 左 -->
    <div id="leftNav" style="width:100%; height:100%; left:-100%; position:absolute; z-index:9999999;">
        <div id="leftNav-partLeft" class="s1c-Bg box-show3" style="width:78%; height:100%; border:none; position:absolute;">
            <div id="userInfo" class="box-show3" style="width:100%; position:relative;">
                <img class="box-show3" src="" style="width:80px; height:80px; margin:18px; background-color: #0ec228; border:none; border-radius:6px;">
                <span style="top:25px; left:118px; position:absolute; z-index:9; color: #0ec228">JesBrian</span>
                <span style="bottom:28px; left:118px; position:absolute; z-index:9;">
                    <a id="updateInfo" class="MyIF tool superBtn-rectangle" href="update.html" target="mainIframe"> 修改资料</a>
                </span>
                <a class="MyIF cancel" style="top:3%; right:1%; position:absolute; font-size:2em;"></a>
            </div>

            <ul id="userOperList" style="padding:0 8% 0 5%;  line-height:38px; overflow:scroll;">
                <li>
                    <a href="everydayRecommend.html" target="mainIframe" class="box-show3" style="width:92%; height:38px; margin:18px 0 0; padding-left:8%; position:relative; display:inline-block; border-radius:2px; color:#AAA; background-color:#505050;">
                        <i class="MyIF hot" style="font-size:32px;"></i><p style="top:1px; left:28%; position:absolute; font-weight:600;">每日推荐</p>
                    </a>
                </li>
                <li>
                    <a href="listenRank.html" target="mainIframe" class="box-show3" style="width:92%; height:38px; margin:18px 0 0; padding-left:8%; position:relative; display:inline-block; border-radius:2px; color:#AAA; background-color:#505050;">
                        <i class="MyIF chart-bar" style="font-size:32px;"></i><p style="top:1px; left:28%; position:absolute; font-weight:600;">听歌排行</p>
                    </a>
                </li>
                <li>
                    <a href="myNews.html" target="mainIframe" class="box-show3" style="width:92%; height:38px; margin:18px 0 0; padding-left:8%; position:relative; display:inline-block; border-radius:2px; color:#AAA; background-color:#505050;">
                        <i class="MyIF feedback" style="font-size:32px;"></i><p style="top:1px; left:28%; position:absolute; font-weight:600;">我的消息</p>
                    </a>
                </li>
                <li>
                    <a class="box-show3" style="width:92%; height:38px; margin:18px 0 0; padding-left:8%; position:relative; display:inline-block; border-radius:2px; color:#AAA; background-color:#505050;">
                        <i class="MyIF coin" style="font-size:32px;"></i><p style="top:1px; left:28%; position:absolute; font-weight:600;">会员中心</p>
                    </a>
                </li>
                <li>
                    <a class="box-show3" style="width:92%; height:38px; margin:18px 0 0; padding-left:8%; position:relative; display:inline-block; border-radius:2px; color:#AAA; background-color:#505050;">
                        <i class="MyIF kinds" style="font-size:32px;"></i><p style="top:1px; left:28%; position:absolute; font-weight:600;">个性换肤</p>
                    </a>
                </li>
            </ul>
        </div>

        <div id="leftNav-partRight" style="width:22%; height:100%; right:0; position:absolute;"></div>
    </div>




    <div id="bottomAudio" class="s1c-Bg box-show3" style="width:100%; height:10%; bottom:0; border:none; border-radius:0; position:absolute; z-index:9999">
        <audio controls src="../index/audio/月半小夜曲.mp3"></audio>
    </div>

    <!-- 主体部分 -->
    <iframe id="mainIframe" name="mainIframe" src="home.html" frameborder=no width="100%" scrolling="no" style="height:90%; top:0; position:absolute;"></iframe>



    <!--jQuery框架-->
    <script src="js/jquery-3.1.1.min.js" type="text/javascript"></script>

    <script>

        /* 调整div、按钮、字体大小，高度、行高等 */
        $("#userOperList").height($(window).height() - $("#userInfo").height());


        /* 触摸事件 */
        $("#leftNav").find($("a")).on("touchend", function () {
            $("#mainIframe").attr("src",$(this).attr("href"));
            $("#leftNav").animate({left:'-100%'});
        });

        $("#leftNav-partRight").on("touchend", function () {
            $("#leftNav").animate({left:'-100%'});
        });



        var startx, starty;
        //获得角度
        function getAngle(angx, angy) {
            return Math.atan2(angy, angx) * 180 / Math.PI;
        };

        //根据起点终点返回方向 1向上 2向下 3向左 4向右 0未滑动
        function getDirection(startx, starty, endx, endy) {
            var angx = endx - startx;
            var angy = endy - starty;
            var result = 0;
            //如果滑动距离太短
            if (Math.abs(angx) < 2 && Math.abs(angy) < 2) {
                return result;
            }
            var angle = getAngle(angx, angy);
            if (angle >= -135 && angle <= -45) {
                result = 1;
            } else if (angle > 45 && angle < 135) {
                result = 2;
            } else if ((angle >= 135 && angle <= 180) || (angle >= -180 && angle < -135)) {
                result = 3;
            } else if (angle >= -45 && angle <= 45) {
                result = 4;
            }
            return result;
        }
        //手指接触屏幕
        document.getElementById("leftNav").addEventListener("touchstart", function(e) {
            startx = e.touches[0].pageX;
            starty = e.touches[0].pageY;
        }, false);
        //手指离开屏幕
        document.getElementById("leftNav").addEventListener("touchend", function(e) {
            var endx, endy;
            endx = e.changedTouches[0].pageX;
            endy = e.changedTouches[0].pageY;
            var direction = getDirection(startx, starty, endx, endy);
            switch (direction) {
                case 0:
                    //alert("未滑动！");
                    break;
                case 1:
                    //alert("向上！")
                    break;
                case 2:
                    //alert("向下！")
                    break;
                case 3:
                    //alert("向左！")
                    $(this).animate({left:'-100%'});
                    break;
                case 4:
                    //alert("向右！")
                    break;
                default:
            }
        }, false);

    </script>
</body>
</html>